---
title: "ANALYSE EXPLORATOIRE DES DONNEES MTCARS"
author: "Presented by Djamal Toe"
institute: "National School for Statistic and Data Analysis"
date: "November 22, 2024"
format:
  revealjs:
    transition-speed: fast
    aspect_ratio: "16:9"
    margin: 0.02
    fig_caption: yes
    center: true
    logo: "logo_ensai.png"
    footer: "Analyse exploratoire des donn√©es mtcars"
    css: style.css
fig_caption: yes
toc: true
toc-expand: false
toc-depth: 1
toc-title: "Table of contents"
---

```{r setup, include=FALSE, echo=FALSE}
knitr::opts_chunk$set(echo = F, warning = F, message = F)
```

```{r, }
capTabNo = 1; capFigNo = 1;
capTab = function(x){
 
    x = paste0("Table ",capTabNo," : ",x)
    capTabNo <<- capTabNo + 1
 x
}

capFig = function(x){
 
    x = paste0("","","",x)
    capFigNo <<- capFigNo + 1
    x
}

repeated_capFig = function(x){
  x = paste0(paste0(paste0("Figure ", capFigNo), ""), x)
  x
}
```

```{r, }
packages_ <- c("ggplot2", "dplyr","readxl",
               "cowplot","kableExtra","gtsummary")

for (pkg in packages_) {
  if (!requireNamespace(pkg, quietly = TRUE)) {
    install.packages(pkg, dependencies = T)
  }
  library(pkg, character.only = TRUE)
}
```

# Introduction

## Contexte

. . .

Le jeu de donn√©es mtcars est l'un des ensembles de donn√©es les plus connus en statistiques et science des donn√©es. Il contient des informations sur les sp√©cifications techniques et les performances de 32 mod√®les de voitures des ann√©es 1970.
Ce dataset offre une opportunit√© unique d'explorer des relations entre des variables m√©caniques, comme la consommation en carburant, la puissance ou encore le poids des v√©hicules.


## Probl√©matique

::: {.fragment .highlight-red .fade-in} 
Comment exploiter les relations entre les caract√©ristiques des voitures pour identifier des groupes ou des tendances qui pourraient aider √† la prise de d√©cision dans le secteur automobile ?
:::

## Objectif g√©n√©ral

::: {.fragment .highlight-blue .fade-in} 
√âtudier les relations entre les caract√©ristiques techniques des voitures afin de d√©gager des tendances et des informations utiles pour la conception ou la s√©lection des v√©hicules.
:::


## Objectifs sp√©cifiques

::: {.fragment .fade-in}
- Explorer les relations entre la consommation en carburant (mpg) et les caract√©ristiques m√©caniques
:::

::: {.fragment .fade-in}
-  Identifier des groupes de voitures ayant des caract√©ristiques similaires √† l'aide d'analyses descriptives et graphiques.
:::

# Mat√©riels et m√©thode

## Mat√©riels

* Logiciel utilis√© : RStudio avec les packages n√©cessaires (ggplot2, dplyr, cowplot, etc.)

* Source des donn√©es : Jeu de donn√©es int√©gr√© mtcars.

## M√©thode

- **Nettoyage des donn√©es :** V√©rification des valeurs manquantes ou aberrantes.

- **Analyse descriptive :** Moyennes, m√©dianes, √©cart-types pour chaque variable.

## M√©thode

**Mod√©lisation multivari√©e : Variables utilis√©es** 

- ***mpg*** : Consommation de carburant en miles par gallon (variable d√©pendante).
- ***wt*** : Poids du v√©hicule (en milliers de livres).
- ***cyl*** : Nombre de cylindres du moteur.
- ***am***: Type de transmission (0 = automatique, 1 = manuelle).
- ***carb*** : Nombre de carburateurs.
- ***hp*** : Puissance brute du moteur (en chevaux-vapeur).

## M√©thode

**Mod√©lisation multivari√©e :** 

$$
\mathbf{Y} = \mathbf{X} \boldsymbol{\beta} + \boldsymbol{\epsilon}
$$

o√π :

- $Y$: Vecteur des valeurs observ√©es (d√©pendantes ici mpg)

- $X$ : Matrice des variables explicatives (ind√©pendantes), incluant une colonne de 1 pour l'intercept.

- $\beta$ : Vecteur des coefficients estim√©s du mod√®le.

- $\epsilon$ : Vecteur des erreurs r√©siduelles.

## M√©thode

**Tests de significativit√© des coefficients**

**Test t de Student**

- **Hypoth√®se nulle ** $H_0$ : le coefficient est √©gal √† z√©ro (c'est-√†-dire, la variable n'a pas d'effet significatif).
- **Hypoth√®se alternative** $H_a$ : Le coefficient est diff√©rent de z√©ro.

Si la **p-valeur** est inf√©rieure √† un seuil significatif $p < 0.05$, nous rejetons l'hypoth√®se nulle et concluons que la variable a un effet significatif sur la variable d√©pendante.

## M√©thode

**Significativit√© globale du mod√®le : Test F**

- **Hypoth√®se nulle** $H_0$: Tous les coefficients sont √©gaux √† z√©ro (pas de pouvoir explicatif).
- **Hypoth√®se alternative** $H_a$ : Au moins un coefficient est diff√©rent de z√©ro (le mod√®le est significatif).

Si la **p-valeur** du test $F$ est inf√©rieure √† $0.05$, nous rejetons l'hypoth√®se nulle et concluons que le mod√®le est significatif.

## M√©thode

**R-carr√© : qualit√© d'ajustement**

- $R^2$ varie entre 0 et 1 :
  - Un $R^2$ proche de 1 signifie que le mod√®le explique bien les variations de la variable d√©pendante.
  - Un $R^2$ proche de 0 indique que le mod√®le n'explique que peu ou pas les variations de la variable d√©pendante.



## M√©thode

- **Visualisations :** 
  * *Graphiques de dispersion (scatterplots) pour √©tudier les corr√©lations*
  
  * *Histogrammes pour analyser la distribution des variables*

# R√©sultats

## Pr√©sentation de l'√©chantillon

```{r, }
columns <- data.frame(
  `Colonne` = c("[,1]", "[,2]", "[,3]", "[,4]", "[,5]", "[,6]", "[,7]", "[,8]", "[,9]", "[,10]", "[,11]"),
  `Nom` = c("mpg", "cyl", "disp", "hp", "drat", "wt", "qsec", "vs", "am", "gear", "carb"),
  `Description` = c(
    "Miles par gallon (US)",
    "Nombre de cylindres",
    "Cylindr√©e (en pouces cubes)",
    "Puissance brute (chevaux)",
    "Rapport du pont arri√®re",
    "Poids (en milliers de livres)",
    "Temps pour parcourir 1/4 de mile",
    "Type de moteur (0 = V, 1 = ligne droite)",
    "Type de transmission (0 = automatique, 1 = manuelle)",
    "Nombre de vitesses avant",
    "Nombre de carburateurs"
  )
)
```
::: {data-id="var" style="background: #fff; width: 90%; height: 90%; font-size: 0.6em;"}
```{r}
kbl(columns, caption = capTab("Description des variables du jeu de donn√©es")) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive")) %>% add_footnote(label = "R :  mtcars")
```
:::

## Pr√©sentation de l'√©chantillon

**R√©sum√© statistiques**

```{r, }
##-- summary pour les variable num√©riques
summary.df.num <- sapply(mtcars[sapply(mtcars, is.numeric)], function(x) {
  c(
    min = min(x, na.rm = TRUE),
    Q1 = quantile(x, 0.25, na.rm = TRUE),
    Q3 = quantile(x, 0.75, na.rm = TRUE),
    med = quantile(x, 0.5, na.rm = TRUE),
    mean = mean(x, na.rm = TRUE),
    max = max(x, na.rm = TRUE),
    count = sum(!is.na(x)),
    sd = sd(x, na.rm = TRUE),
    `NA's` = round(sum(is.na(x)),0)
  )
})
summary.df.num <- as.data.frame(summary.df.num)
```
::: {data-id="stat" style="background: #fff; width: 90%; height: 90%; font-size: 0.56em;"}
```{r}
kable(summary.df.num, caption = capTab("R√©sum√© statistique des variables")) %>% add_footnote(label = "R :  mtcars")
```
:::

## R√©sultats principaux : Mod√©lisation

**S√©lection de mod√®le en ajoutant ou en supprimant des variables pour minimiser l'AIC**

::: {data-id="stat" style="background: #fff; width: 90%; height: 90%; font-size: 0.75em;"}
```{r}
modele <- lm(mpg ~ wt + cyl + am + hp + carb + qsec + vs + gear + disp, data = mtcars)
modele <- step(modele, direction = "both", trace = 0)
modele %>% 
  tbl_regression(
    pvalue_fun = label_style_pvalue(digits = 2),
  ) %>% 
  add_global_p() %>% 
  bold_p(t = 0.1) %>% 
  bold_labels() %>% 
  italicize_levels()
```
:::

## R√©sultats principaux : Mod√©lisation

**Variable `wt` (poids du v√©hicule)**

üîª **Coefficient : -3.9**

üìå *Interpr√©tation* :

- Chaque augmentation d'une unit√© du poids diminue la consommation estim√©e de 3.9 mpg.

üìâ *Effet n√©gatif significatif* :

- p < 0.001 : plus le v√©hicule est lourd, moins il est √©conome en carburant.

## R√©sultats principaux : Mod√©lisation

**Variable `am` (type de transmission)**

üî∫ **Coefficient : 2.9**

üìå *Interpr√©tation* :
- Les v√©hicules √† transmission **manuelle** consomment en moyenne 2.9 mpg de plus que ceux √† **transmission automatique**, toutes choses √©gales par ailleurs.

‚úÖ *Effet significatif* :
- p = 0.047 (significatif au seuil de 5 %)

## R√©sultats principaux : Mod√©lisation

**Variable `qsec` (temps sur 1/4 de mile)**

üî∫ **Coefficient : 1.2**

üìå *Interpr√©tation* :
- Chaque seconde suppl√©mentaire pour faire le 1/4 mile est associ√©e √† une augmentation de 1.2 mpg.

‚úÖ *Effet positif et hautement significatif* :
- p < 0.001


## R√©sultats s√©condaires

**R√©partition des voitures par cylindres**

```{r, }
ggplot(mtcars, aes(x = factor(cyl))) +
  geom_bar(fill = "steelblue") +
  labs(x = "Cylindres", y = "Nombre de voitures") +
  theme_light() +
  scale_x_discrete(limits = rev(levels(factor(mtcars$cyl))))

```

La majorit√© des voitures ont 4 ou 8 cylindres.

## R√©sultats s√©condaires

**R√©partition des voitures par transmission**

```{r}
ggplot(mtcars, aes(x = factor(am))) +
  geom_bar(fill = "steelblue") +
  labs(x = "Transmission (0 = automatique, 1 = manuelle)", y = "Nombre de voitures") +
  theme_light() +
  scale_x_discrete(limits = rev(levels(factor(mtcars$am))))

```

# Conclusion

Ceci est juste pour montrer comment faire une pr√©sentation avec R et quarto. Les r√©sultats ne sont donc pas interpr√©t√© avec une grande rigueure.